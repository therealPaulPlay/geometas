{% extends "template_content.html" %}

{% block title_main %}{{ session.quiz.name }} - Summary{% endblock %}

{% block content %}

    <div class="">
        {% if not user.is_authenticated %}
            <div class="border-l-4 border-emerald-400 bg-emerald-50 p-4 mb-8">
                <div class="flex">
                  <div class="flex-shrink-0">
                    <svg class="h-5 w-5 text-emerald-400"  xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.383a14.406 14.406 0 0 1-3 0M14.25 18v-.192c0-.983.658-1.823 1.508-2.316a7.5 7.5 0 1 0-7.517 0c.85.493 1.509 1.333 1.509 2.316V18" />
                    </svg>
                  </div>
                  <div class="ml-3 text-sm text-emerald-700">
                    <div>With a free Geometas account all your quiz progress is saved and your quizzes will automatically show the metas you should practice the most.</div>
                    <div class="pt-0.5"><a href="{% url 'login' %}" class="font-medium text-emerald-700 underline hover:text-emerald-600">Sign up for free now</a></div>
                  </div>
                </div>
              </div>
        {% endif %}

        <div class="font-medium py-4">
            You mastered {{ correct_fact_count }} of {{ total_fact_count }} metas ({{correct_percentage|floatformat:"0"}}%)
        </div>

        <div class="mt-4">
            <div class="grid grid-cols-2 gap-4">
                {% for quiz_session_fact in session.quizsessionfacts.all %}
                    <div class="flex h-12">
                        <div class="w-20 mr-4">
                            <a href="{% url 'cms:fact_detail' quiz_session_fact.fact.uuid %}">
                                <img src="{{ quiz_session_fact.fact.image_url }}" class="max-h-12">
                            </a>
                        </div>
                        <div class="my-auto">
                            <a href="{% url 'cms:fact_detail' quiz_session_fact.fact.uuid %}">
                                {{ quiz_session_fact.fact.answer|truncatechars:'50' }}
                            </a>
                        </div>
                    </div>
                    <div class="my-auto font-medium">
                        {% if quiz_session_fact.review_result == 'correct' %}
                            <span class="text-green-600">✅ Easy</span>
                        {% else %}
                            <span class="text-red-600">❌ Didn't know</span>
                        {% endif %}
                    </div>
                {% endfor %}
            </div>
        </div>

        <div class="max-w-full pt-12 fixed bottom-0 inset-x-0 sm:relative sm:bottom-auto">
            <a class="font-semibold h-16 px-6 sm:rounded-lg flex items-center justify-center bg-sky-500 hover:bg-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 focus:ring-offset-slate-50 text-white " href="{% url 'metas_index' %}" id="spaceShortcut">
                Back to Home
            </a>
        </div>

        <script>
            {% include 'quiz/components/js/space-shortcut.html' %}
        </script>

    </div>

{% endblock %}