{% extends "template_content_with_extra.html" %}

{% block title_main %}Metas&nbsp;&nbsp;<span class="text-xs text-slate-300">{{total_fact_count}} available</span>{% endblock %}

{% block content_top_extra %}
    <div class="text-slate-700 font-light text-sm">
        Geometas helps you become a Geoguessr champion: learn Geoguessr metas from around the world, all Google Streetview countries, regions and cities, and test your knowledge with quizzes.
    </div>

    <div class="mt-4 sm:flex gap-x-4">
        {% if quiz_session %}
        <a 
            class="py-3 px-6 flex flex-col flex-grow rounded-md items-center justify-center bg-sky-500 hover:bg-sky-400 focus:outline-none focus:ring-2 focus:ring-sky-500 focus:ring-offset-2 focus:ring-offset-slate-50 text-white " 
            href="{% url 'quiz:quiz' quiz_session.quiz.uuid %}">
            <div class="text-xs font-light">Continue your in-progress quiz</div>
            <div class="font-bold">{{quiz_session.quiz.name}}</div>
        </a>
        {% endif %}
        <a 
            class="mt-2 sm:mt-0 sm:max-w-[50%] mx-auto py-3 px-6 flex flex-col flex-grow rounded-md items-center justify-center bg-teal-500 hover:bg-teal-400 focus:outline-none focus:ring-2 focus:ring-teal-500 focus:ring-offset-2 focus:ring-offset-slate-50 text-white " 
            href="{% url 'quiz:quiz' random_quiz_uuid %}">
            <div class="text-xs font-light">Learn some Geometas</div>
            <div class="font-bold">Start new random quiz</div>
        </a>
    </div>
    
{% endblock %}

{% block content %}

    <div class="">

        <div class="">
            <h2 class="text-2xl font-bold text-slate-900">Categories</h2>
            <div class="grid grid-cols-2 sm:grid-cols-4 gap-2 sm:gap-x-6 mt-4">
                {% for category in categories %}
                    <a href="{% url 'cms:category' category.slug %}" class="text-base font-normal text-sky-600 hover:text-sky-700">
                        {{category.name}}<span class="text-slate-400 text-sm"> ({{ category.quiz.num_facts }})</span>
                    </a>
                {% endfor %}
            </div>
        </div> 
        
        <div class="mt-10 sm:mt-20">
            <div class="grid grid-cols-1 sm:grid-cols-4 gap-2 sm:gap-x-6">
                
                <div>
                    <h3 class="text-2xl font-bold text-slate-900 mb-2">Europe</h3>
                    <div class="">
                        {% regroup countries_europe by region as region_list %}
                        {% for region in region_list %}
                            <div class="pt-3 pb-5">
                                <div class="mb-2">
                                    <a href="{% url 'cms:region' region.grouper.slug %}" class="text-lg font-semibold text-sky-900 hover:text-sky-700">
                                        {{ region.grouper.name }}
                                        <span class="text-slate-400 text-sm"> ({{ region.grouper.quiz.num_facts }})</span>
                                    </a>
                                </div>
                                {% for country in region.list %}
                                    <div class="mb-1 grid grid-cols-2 sm:grid-cols-1 gap-x-2">
                                        <a href="{% url 'cms:country' country.slug %}" class="text-base font-normal text-sky-600 hover:text-sky-700">
                                            {{ country.flag_emoji }} {{country.name}}<span class="text-slate-400 text-sm"> ({{ country.quiz.num_facts|default:"0" }})</span>
                                        </a>
                                    </div>
                                {% endfor %}
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <div>
                    <h3 class="text-2xl font-bold text-slate-900 mb-2">Asia</h3>
                    <div class="">
                        {% regroup countries_asia by region as region_list %}
                        {% for region in region_list %}
                            <div class="pt-3 pb-5">
                                <div class="mb-2">
                                    <a href="{% url 'cms:region' region.grouper.slug %}" class="text-lg font-semibold text-sky-900 hover:text-sky-700">
                                        {{ region.grouper.name }}
                                        <span class="text-slate-400 text-sm"> ({{ region.grouper.quiz.num_facts }})</span>
                                    </a>
                                </div>
                                {% for country in region.list %}
                                    <div class="mb-1">
                                        <a href="{% url 'cms:country' country.slug %}" class="text-base font-normal text-sky-600 hover:text-sky-700">
                                            {{ country.flag_emoji }} {{country.name}}<span class="text-slate-400 text-sm"> ({{ country.quiz.num_facts|default:"0" }})</span>
                                        </a>
                                    </div>
                                {% endfor %}
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <div>
                    <h3 class="text-2xl font-bold text-slate-900 mb-2">Americas</h3>
                    <div class="">
                        {% regroup countries_americas by region as region_list %}
                        {% for region in region_list %}
                            <div class="pt-3 pb-5">
                                <div class="mb-2">
                                    <a href="{% url 'cms:region' region.grouper.slug %}" class="text-lg font-semibold text-sky-900 hover:text-sky-700">
                                        {{ region.grouper.name }}
                                        <span class="text-slate-400 text-sm"> ({{ region.grouper.quiz.num_facts }})</span>
                                    </a>
                                </div>
                                {% for country in region.list %}
                                    <div class="mb-1">
                                        <a href="{% url 'cms:country' country.slug %}" class="text-base font-normal text-sky-600 hover:text-sky-700">
                                            {{ country.flag_emoji }} {{country.name}}<span class="text-slate-400 text-sm"> ({{ country.quiz.num_facts|default:"0" }})</span>
                                        </a>
                                    </div>
                                {% endfor %}
                            </div>
                        {% endfor %}
                    </div>
                </div>

                <div>
                    <h3 class="text-2xl font-bold text-slate-900 mb-2">Rest of World</h3>
                    <div class="">
                        {% regroup countries_row by region as region_list %}
                        {% for region in region_list %}
                            <div class="pt-3 pb-5">
                                <div class="mb-2">
                                    <a href="{% url 'cms:region' region.grouper.slug %}" class="text-lg font-semibold text-sky-900 hover:text-sky-700">
                                        {{ region.grouper.name }}
                                        <span class="text-slate-400 text-sm"> ({{ region.grouper.quiz.num_facts }})</span>
                                    </a>
                                </div>
                                {% for country in region.list %}
                                    <div class="mb-1">
                                        <a href="{% url 'cms:country' country.slug %}" class="text-base font-normal text-sky-600 hover:text-sky-700">
                                            {{ country.flag_emoji }} {{country.name}}<span class="text-slate-400 text-sm"> ({{ country.quiz.num_facts|default:"0" }})</span>
                                        </a>
                                    </div>
                                {% endfor %}
                            </div>
                        {% endfor %}
                    </div>
                </div>

            </div>
        
        </div>

    </div>

{% endblock %}